(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-34d4f780"],{"25f0":function(t,e,a){"use strict";var n=a("6eeb"),o=a("825a"),r=a("d039"),i=a("ad6d"),s="toString",c=RegExp.prototype,l=c[s],u=r((function(){return"/a/b"!=l.call({source:"a",flags:"b"})})),f=l.name!=s;(u||f)&&n(RegExp.prototype,s,(function(){var t=o(this),e=String(t.source),a=t.flags,n=String(void 0===a&&t instanceof RegExp&&!("flags"in c)?i.call(t):a);return"/"+e+"/"+n}),{unsafe:!0})},"48d9":function(t,e,a){"use strict";var n=a("9f10"),o=a.n(n);o.a},"4d63":function(t,e,a){var n=a("83ab"),o=a("da84"),r=a("94ca"),i=a("7156"),s=a("9bf2").f,c=a("241c").f,l=a("44e7"),u=a("ad6d"),f=a("9f7f"),d=a("6eeb"),g=a("d039"),m=a("69f3").set,p=a("2626"),h=a("b622"),b=h("match"),v=o.RegExp,w=v.prototype,$=/a/g,S=/a/g,_=new v($)!==$,k=f.UNSUPPORTED_Y,x=n&&r("RegExp",!_||k||g((function(){return S[b]=!1,v($)!=$||v(S)==S||"/a/i"!=v($,"i")})));if(x){var E=function(t,e){var a,n=this instanceof E,o=l(t),r=void 0===e;if(!n&&o&&t.constructor===E&&r)return t;_?o&&!r&&(t=t.source):t instanceof E&&(r&&(e=u.call(t)),t=t.source),k&&(a=!!e&&e.indexOf("y")>-1,a&&(e=e.replace(/y/g,"")));var s=i(_?new v(t,e):v(t,e),n?this:w,E);return k&&a&&m(s,{sticky:a}),s},C=function(t){t in E||s(E,t,{configurable:!0,get:function(){return v[t]},set:function(e){v[t]=e}})},y=c(v),R=0;while(y.length>R)C(y[R++]);w.constructor=E,E.prototype=w,d(o,"RegExp",E)}p("RegExp")},5319:function(t,e,a){"use strict";var n=a("d784"),o=a("825a"),r=a("7b0b"),i=a("50c4"),s=a("a691"),c=a("1d80"),l=a("8aa5"),u=a("14c3"),f=Math.max,d=Math.min,g=Math.floor,m=/\$([$&'`]|\d\d?|<[^>]*>)/g,p=/\$([$&'`]|\d\d?)/g,h=function(t){return void 0===t?t:String(t)};n("replace",2,(function(t,e,a,n){var b=n.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,v=n.REPLACE_KEEPS_$0,w=b?"$":"$0";return[function(a,n){var o=c(this),r=void 0==a?void 0:a[t];return void 0!==r?r.call(a,o,n):e.call(String(o),a,n)},function(t,n){if(!b&&v||"string"===typeof n&&-1===n.indexOf(w)){var r=a(e,t,this,n);if(r.done)return r.value}var c=o(t),g=String(this),m="function"===typeof n;m||(n=String(n));var p=c.global;if(p){var S=c.unicode;c.lastIndex=0}var _=[];while(1){var k=u(c,g);if(null===k)break;if(_.push(k),!p)break;var x=String(k[0]);""===x&&(c.lastIndex=l(g,i(c.lastIndex),S))}for(var E="",C=0,y=0;y<_.length;y++){k=_[y];for(var R=String(k[0]),z=f(d(s(k.index),g.length),0),B=[],T=1;T<k.length;T++)B.push(h(k[T]));var L=k.groups;if(m){var A=[R].concat(B,z,g);void 0!==L&&A.push(L);var H=String(n.apply(void 0,A))}else H=$(R,g,z,B,L,n);z>=C&&(E+=g.slice(C,z)+H,C=z+R.length)}return E+g.slice(C)}];function $(t,a,n,o,i,s){var c=n+t.length,l=o.length,u=p;return void 0!==i&&(i=r(i),u=m),e.call(s,u,(function(e,r){var s;switch(r.charAt(0)){case"$":return"$";case"&":return t;case"`":return a.slice(0,n);case"'":return a.slice(c);case"<":s=i[r.slice(1,-1)];break;default:var u=+r;if(0===u)return e;if(u>l){var f=g(u/10);return 0===f?e:f<=l?void 0===o[f-1]?r.charAt(1):o[f-1]+r.charAt(1):e}s=o[u-1]}return void 0===s?"":s}))}}))},"61e0":function(t,e,a){"use strict";var n=a("fb9b"),o=a.n(n);o.a},"635b":function(t,e,a){},"79fe":function(t,e,a){"use strict";var n=a("635b"),o=a.n(n);o.a},"85e4":function(t,e,a){},"8adb":function(t,e,a){"use strict";var n=a("85e4"),o=a.n(n);o.a},"9f10":function(t,e,a){},b0c0:function(t,e,a){var n=a("83ab"),o=a("9bf2").f,r=Function.prototype,i=r.toString,s=/^\s*function ([^ (]*)/,c="name";!n||c in r||o(r,c,{configurable:!0,get:function(){try{return i.call(this).match(s)[1]}catch(t){return""}}})},b3d7:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"home"}},[a("div",{attrs:{id:"content"}},[a("HorizonSpace"),a("div",{attrs:{id:"right_bar"}},[a("userBar")],1),a("div",{attrs:{id:"Main"}})],1)])},o=[],r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"carousel"},[a("el-button",{attrs:{icon:"el-icon-search",circle:""}})],1)},i=[],s={name:"Carousel",data:function(){return{img:null}}},c=s,l=(a("61e0"),a("2877")),u=Object(l["a"])(c,r,i,!1,null,"7e3f80ab",null),f=(u.exports,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"userBar"},[a("el-card",{attrs:{shadow:"hover"}},[null==this.$store.state.userinfo?a("div",[a("div",{staticClass:"middle"},[t._v(" 一起在CUIT搞技术吧 ")]),a("HorizonSpace"),a("div",{staticClass:"middle"},[a("el-button",{staticClass:"btn",attrs:{round:""},on:{click:function(e){return t.ShowLogin()}}},[t._v("登入")])],1),a("HorizonSpace"),a("div",{staticClass:"middle"},[a("el-button",{staticClass:"btn",attrs:{round:""},on:{click:function(e){return t.ShowRegi()}}},[t._v("注册")])],1)],1):t._e(),null!=this.$store.state.userinfo?a("div",[a("div",{staticClass:"head"},[a("img",{staticClass:"image",attrs:{src:"https://shadow.elemecdn.com/app/element/hamburger.9cf7b091-55e9-11e9-a976-7f4d0b07eef6.png"}}),a("p",{staticClass:"username"},[t._v(t._s(this.$store.state.userinfo.name))])]),a("HorizonSpace"),t._v(" 个人博客:"),a("br"),t._v("sdahsuhdasdasdadasdasdasfaddsasafadfsaad "),a("HorizonSpace"),t._v(" 实验室:"),a("br"),t._v("sdahsuhdasdasdadasdasdasfaddsasafadfsaad "),a("HorizonSpace"),a("div",{staticClass:"btns"},["/bbs/write"!=t.$route.path?a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"发布自己的新分享",placement:"top"}},[a("el-button",{attrs:{icon:"el-icon-edit",circle:""},on:{click:function(e){return t.toWrite()}}})],1):t._e(),a("el-button",{staticStyle:{width:"100%"},attrs:{round:""},on:{click:function(e){return t.toPerson()}}},[t._v("个人页")])],1)],1):t._e()]),null==this.$store.state.userinfo?a("LoginDialogue",{ref:"LoginDialogue"}):t._e()],1)}),d=[],g=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"HorizonSpace"})},m=[],p={name:"HorizonSpace",data:function(){return{img:null}}},h=p,b=(a("48d9"),Object(l["a"])(h,g,m,!1,null,"a6a1cca8",null)),v=b.exports,w=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"login"},[a("el-dialog",{attrs:{title:t.loginState?"登入":"注册",visible:t.dialogVisible,width:"300px","close-on-click-modal":!1,id:"logindialog"},on:{"update:visible":function(e){t.dialogVisible=e},close:function(e){return t.onClose()}}},[a("el-form",{ref:"form",attrs:{model:t.form,rules:t.rules,"status-icon":""}},[a("el-form-item",{ref:"nameRef",attrs:{prop:"name"}},[a("el-input",{attrs:{placeholder:t.loginState?"用户名/邮箱":"邮箱","auto-complete":"off"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),a("el-form-item",{attrs:{prop:"pw0"}},[a("el-input",{attrs:{type:"password",placeholder:"密码","auto-complete":"off"},model:{value:t.form.pw0,callback:function(e){t.$set(t.form,"pw0",e)},expression:"form.pw0"}})],1),t.loginState?t._e():a("el-form-item",{attrs:{prop:"pw1"}},[a("el-input",{attrs:{type:"password",placeholder:"重复密码","auto-complete":"off"},model:{value:t.form.pw1,callback:function(e){t.$set(t.form,"pw1",e)},expression:"form.pw1"}})],1),t.loginState?t._e():a("div",{attrs:{id:"checkCodeLine"}},[t.loginState?t._e():a("el-form-item",{attrs:{prop:"code"}},[a("el-input",{attrs:{placeholder:"验证码","auto-complete":"off"},model:{value:t.form.code,callback:function(e){t.$set(t.form,"code",e)},expression:"form.code"}})],1),a("el-button",{attrs:{id:"checkCodeBtn",loading:t.gettingCode},on:{click:t.getCode}},[t._v("获取验证码")])],1)],1),a("div",{staticClass:"middle"},[a("el-button",{staticClass:"btn",attrs:{loading:t.loading,type:"primary"},on:{click:function(e){return t.submit()}}},[t._v(t._s(t.loginState?"登入":"注册"))]),a("el-button",{attrs:{type:"text"},on:{click:function(e){return t.setLoginState(!t.loginState)}}},[t._v(t._s(t.loginState?"没有账号，前往注册":"已有账号，前往登入"))])],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"})],1)],1)},$=[],S=(a("b0c0"),a("1bab"));function _(t){return Object(S["a"])({method:"post",url:"/api/login/",data:t})}function k(t){return Object(S["a"])({method:"post",url:"/api/register/",data:t})}function x(t){return Object(S["a"])({method:"post",url:"/api/emailcodes/",data:t},6e4)}a("4d63"),a("ac1f"),a("25f0"),a("5319");function E(t,e,a){var n=/^([A-Za-z0-9_\-\.])+\@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,4})$/;""===e?a(new Error("请输入邮箱")):n.test(e)?a():a(new Error("邮箱不合法"))}var C="";function y(t,e,a){C=e;var n=/^(?![0-9]+$)(?![a-zA-Z]+$)[0-9A-Za-z]{6,20}$/;""===e?a(new Error("请输入密码")):n.test(e)?a():a(new Error("密码为6至20位数字+字母"))}function R(t,e,a){var n=/^(?![0-9]+$)(?![a-zA-Z]+$)[0-9A-Za-z]{6,20}$/;""===e?a(new Error("请输入密码")):n.test(e)?e!=C?a(new Error("两次密码输入不一致")):a():a(new Error("密码为6至20位数字+字母"))}function z(t,e,a){var n=/^\d{6}$/;""===e?a(new Error("请输入验证码")):n.test(e)?a():a(new Error("验证码格式有误"))}var B={name:"login",components:{HorizonSpace:v},methods:{getCode:function(){var t=this;"success"==this.$refs.nameRef.validateState?(console.log("sasdasd"),this.gettingCode=!0,x({email:this.form.name}).then((function(e){switch(console.log("res"),console.log(e),e.status){case 200:switch(e.data.status){case 0:t.$alert("已经发送验证码到邮箱，请注意查看","提示",{confirmButtonText:"确定"});break;case 1:t.$alert("不存在的邮箱，请填写您可用的邮箱","警告",{confirmButtonText:"确定"});break}break;case 400:switch(e.data.email.status){case"1":t.$alert("此邮箱已注册","警告",{confirmButtonText:"确定"});break;case"3":t.$alert("请在上一次获取一分钟后再进行请求","警告",{confirmButtonText:"确定"});break}break}t.gettingCode=!1}))):this.$alert("邮箱无效，请填写正确格式的邮箱","警告",{confirmButtonText:"确定"})},onClose:function(){this.$refs.form.resetFields(),this.form={name:"",pw0:"",pw1:"",code:""}},setLoginState:function(t){this.$refs.form.resetFields(),this.loginState=!this.loginState},isValid:function(){},submit:function(){var t=this;this.$refs.form.validate((function(e){e&&(t.loading=!0,t.loginState?_({user:t.form.name,password:t.form.pw0}).then((function(e){switch(console.log(e),e.status){case 400:t.$alert("用户名或密码错误","警告",{confirmButtonText:"确定"}),t.loading=!1;break;case 200:t.$store.commit("setUserinfo",{token:e.data.token,id:e.data.results.id,name:e.data.results.username,email:e.data.results.email}),t.dialogVisible=!1,t.$notify.info({title:"消息",message:"您已经成功登录",duration:2e3});break;default:t.loading=!1;break}})).catch((function(e){t.loading=!1,console.log("ERROR"),console.log(e)})):k({email:t.form.name,password:t.form.pw0,password2:t.form.pw1,code:t.form.code}).then((function(e){switch(console.log(e),e.status){case 200:switch(e.data.status){case 0:t.$alert("注册成功","提示",{confirmButtonText:"前往登入"}),console.log("hhhhhh"),t.loginState=!0,t.loading=!1;break;default:t.loading=!1;break}break;case 400:if(e.data.code)switch(e.data.code.status){case"4":t.$alert("注册失败，验证码错误","提示",{confirmButtonText:"确认"});break;case"5":t.$alert("注册失败，未向邮箱发送验证码","提示",{confirmButtonText:"确认"});break;default:break}else t.$alert("注册失败，用户名已存在","提示",{confirmButtonText:"确认"})}t.loading=!1})).catch((function(e){t.loading=!1,console.log(e)})))}))}},data:function(){return{loginState:!0,gettingCode:!1,dialogVisible:!1,form:{name:"",pw0:"",pw1:"",code:""},loading:!1,rules:{name:[{validator:E,trigger:"blur"}],pw0:[{validator:y,trigger:"blur"}],pw1:[{validator:R,trigger:"blur"}],code:[{validator:z,trigger:"blur"}]},timer:null}}},T=B,L=(a("79fe"),Object(l["a"])(T,w,$,!1,null,"1d0ead25",null)),A=L.exports,H={name:"UserBar",components:{HorizonSpace:v,LoginDialogue:A},mounted:function(){console.log(this.$store.state.userinfo)},methods:{ShowLogin:function(){this.$refs.LoginDialogue.loginState=!0,this.$refs.LoginDialogue.dialogVisible=!0},ShowRegi:function(){this.$refs.LoginDialogue.loginState=!1,this.$refs.LoginDialogue.dialogVisible=!0},toPerson:function(){this.$router.push({path:"/person"})},toWrite:function(){this.$router.push({path:"/bbs/write"})}},data:function(){return{dialogVisible:!1}}},O=H,D=(a("edf5"),Object(l["a"])(O,f,d,!1,null,"21dcc7c5",null)),P=D.exports,U={name:"Home",components:{userBar:P,HorizonSpace:v}},j=U,V=(a("8adb"),Object(l["a"])(j,n,o,!1,null,"56e41930",null));e["default"]=V.exports},bb68:function(t,e,a){},edf5:function(t,e,a){"use strict";var n=a("bb68"),o=a.n(n);o.a},fb9b:function(t,e,a){}}]);
//# sourceMappingURL=chunk-34d4f780.5b055450.js.map